docker:
  - image: cimg/node:20.13.1
resource_class: small
shell: /bin/bash -eo pipefail
steps:
  - checkout
  - check_circleci_config
  - install_flutter
  - run:
      name: Check Formatting
      command: fvm dart format -l 120 -o none --set-exit-if-changed .
  # Prepare project after formatting check to avoid errors due to autogenerated files
  - prepare_project
  - run:
      name: Check Analyzer and Linting
      command: fvm flutter analyze --fatal-infos --fatal-warnings
#  - run:
#      name: Tests
#      command: fvm flutter test
